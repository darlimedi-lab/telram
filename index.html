<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telram Anak Binaan</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <style>
    body {
      background-color: #f4f4f4;
    }
    .container {
      max-width: 800px;
    }
    .logo {
      width: 80px;
      height: auto;
    }
    .header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }
    .header .instansi {
      margin-left: 1rem;
    }
    .logout-btn {
      position: absolute;
      top: 20px;
      right: 20px;
    }
  </style>
</head>
<body>
  <div class="container mt-5">
    <button class="btn btn-danger logout-btn" onclick="logout()">Logout</button>
    <div class="header">
      <img src="Logo_Kemenkumham.jpg" alt="Logo" class="logo">
      <div class="instansi">
        <h5 class="mb-0">Kementerian Imigrasi dan Pemasyarakatan</h5>
        <p class="mb-0">Direktorat Jenderal Pemasyarakatan</p>
        <p class="mb-0">LPKA Kelas II Jakarta</p>
        <p class="mb-0">Jl. Raya Gandul, Ciganjur, Jakarta Selatan</p>
      </div>
    </div>

    <h4 class="text-center mb-4">Form Data Anak Binaan</h4>

    <form id="formAnak">
      <div class="mb-3">
        <label for="nama" class="form-label">Nama Anak</label>
        <input type="text" id="nama" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="tglMulai" class="form-label">Tanggal Mulai Pidana</label>
        <input type="date" id="tglMulai" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="lamaPidana" class="form-label">Lama Pidana (format: tahun, bulan, hari)</label>
        <div class="d-flex gap-2">
          <input type="number" id="tahun" placeholder="Tahun" class="form-control">
          <input type="number" id="bulan" placeholder="Bulan" class="form-control">
          <input type="number" id="hari" placeholder="Hari" class="form-control">
        </div>
      </div>

      <button type="button" class="btn btn-primary" onclick="hitungPB()">Hitung Tanggal Bebas & PB</button>
    </form>

    <div id="hasil" class="mt-4"></div>
  </div>

  <script>
    function logout() {
      localStorage.removeItem('isLoggedIn');
      window.location.href = 'login.html';
    }

    function hitungPB() {
      const nama = document.getElementById('nama').value;
      const tglMulai = new Date(document.getElementById('tglMulai').value);
      const tahun = parseInt(document.getElementById('tahun').value) || 0;
      const bulan = parseInt(document.getElementById('bulan').value) || 0;
      const hari = parseInt(document.getElementById('hari').value) || 0;

      if (!tglMulai || isNaN(tglMulai.getTime())) {
        alert("Tanggal mulai tidak valid.");
        return;
      }

      let totalHariPidana = tahun * 365 + bulan * 30 + hari;
      let tglBebas = new Date(tglMulai);
      tglBebas.setDate(tglBebas.getDate() + totalHariPidana);

      let pb = Math.floor(totalHariPidana / 2);
      let tglPB = new Date(tglMulai);
      tglPB.setDate(tglPB.getDate() + pb);

      const hasilDiv = document.getElementById('hasil');
      hasilDiv.innerHTML = `
        <div class="alert alert-success">
          <p><strong>Nama:</strong> ${nama}</p>
          <p><strong>Tanggal Bebas:</strong> ${tglBebas.toLocaleDateString('id-ID')}</p>
          <p><strong>Perhitungan PB (Â½ masa pidana):</strong> ${pb} hari</p>
          <p><strong>Tanggal PB:</strong> ${tglPB.toLocaleDateString('id-ID')}</p>
        </div>
      `;
    }

    // Cek apakah sudah login
    if (!localStorage.getItem('isLoggedIn')) {
      window.location.href = 'login.html';
    }
  </script>
</body>
</html>
